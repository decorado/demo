# Decora Autocomplete

`import { DecAutocompleteModule } from '@decora/browser-lib-ui';`

## Doing

- `Preload` input to preload an array of objects to be used as autocomplete options

- `Loading message` when fetching data from back-end;

- When the term entered does not match any option the input must be reset to last value;

## API

### Methods

#### `clear(reopenAfterClear: boolean)`
Clear the input and reopen the selection if defined to;

#### `closePanel()`
Closes the autocomplete selection panel;

#### `openPanel()`
Opens the autocomplete selection panel;

#### `reset(reopenAfterReset: boolean)`
Reset the input and reopen the selection if defined to;


### Input

#### `extractRowsFn`: (res) => res
Function used to extract the list from the API response. The default is to return the entire response but with this function you can extract the list from the response before populate the autocomplete.

#### `customFetchFunction: CustomFetchFunction`
Function that returns an `Observable<any[]>` to be used as options. This functions enables the usage of custom methods that are not covered by DecoraApi;

Important: This function must be Arrow Function `const functionA = () => {}` to enable sharing context inside Observables.

#### `disabled: boolean`
Disables the autocomplete input;

#### `endpoint: string`
A path to the resource in the API. It uses DecorApi to fetch the data, so you have to pass only the path like `/accounts` to retrieve all accounts.

#### `labelAttr: string`
Defines an object property to be used as option label;

#### `labelFn: string`
Defines a function to extract a label from an option;

#### `multi: boolean`
Enable multiple options selection;

#### `name: string`
The input element name;

#### `options: any[]`
An array of options to be used as autocomplete options;

#### `placeholder: string`
Defines a text to be shown when there is no value set;

#### `repeat: boolean`
Defines if the input is repeat;

#### `required: boolean`
Defines if the input is required;

#### `valueAttr: string`
Defines an object property to be used as option value;

#### `valueFn: string`
Defines a function to extract a value from an option;


### Custom option template

`dec-autocomplete-option-template` is used to create custom options template as we can see in the example bellow.

### Output

#### `blur => any`
Event triggered on input blurry;

#### `optionSelected => SelectionEvent`
This output emits a value every time an option is selected or the selected value is cleaned;

## Fetch priority
As we have three different ways to retrieve options, when more than one is set, the priority is:
  1. `options`
  2. `customFetchFunction`
  3. `endpoint`


## Examples

```html
  <dec-autocomplete name="endpointLabelAndValueAttr"
  [(ngModel)]="endpointLabelAndValueAttr"
  (optionSelected)="optionSelected($event)"
  [endpoint]="endpoint"
  [labelAttr]="labelAttr"
  [valueAttr]="valueAttr">

    <dec-autocomplete-option-template>
      <ng-template let-row="row">
        {{ row.name }}
      </ng-template>
    </dec-autocomplete-option-template>
  </dec-autocomplete>
```
